function [D,W,error] = distance(X)
try
format long;
% X = [-3.60529  -3.87941  0.23156  2.46487  1.88176  15.42634 0.38246  11.72211  1.38618  -1.21819  13.00238  -6.13506];
% X = [-3.60529  -3.87941  0.23156  2.46487  1.88176  15.42634 0.38246  11.72211  1.88618  -1.21819  13.00238  -6.13506];

% X = [ -3.82908  -2.83652   0.15152   2.08200   1.59488   5.39672...
%        0.29474   0.58545   1.74938  -1.44383  15.28438  -7.80303]; % bad X, season merge errors, firm type 57

%  X = [-4.03445798011107,-6.94738000951559,0.142220164381744,0.959322530876036,0.805958085474937,...
% 18.2601783879085,0.199551202967806,3.15966673348177,0.893634850972653,-0.474077221570324,11.6836739170030,-11.5573865307055]; % generates splicing errors, firm type = 99.00

% X = [...
% -3.52201733966036,-7.45364423602616,0.164776405852209,2.16694223391996,...
% 1.10043965330324,17.7941196964992,0.204709972120953,2.70540975840051,...
% 1.95287861373363,-0.224270614673912,9.90178046582606,-4.70162533874120]; % bad X firm type 118

% X = [-8.77979042563878,-5.40949300436719,0.127030507435567,1.17662646111489,...
%     0.691372240970635,19.2960293269786,0.210611862025685,2.51206406169377,...
%     1.34219690747208,-0.234511817600981,7.00979490698721,-12.5760512972819]; % bad X firm type 106

% X = [-3.60529000000000,-3.87941000000000,0.231560000000000,2.46487000000000,...
%     1.88176000000000,15.4263400000000,0.382460000000000,11.7221100000000,...
%     1.88618000000000,-1.21819000000000,13.0023800000000,-6.13506000000000]; % bad X for type 106

% X = [-8.72324153487512,-4.92150435720946,0.177105346931404,1.10771786000358,...
%     0.622532357648161,13.4047573179203,0.195556709185567,2.70293822360814,...
%     1.24014360084136,-0.133819137445952,7.79823198960836,-10.1191373292512]; % bad X for type 99, t=168

% X =[-10.95115 -2.67973  0.06069  1.59568  0.44638  8.70624...
%     0.06478  3.86191  1.66270 -0.32789  9.08383 -10.56797]; % bad X for 71, 78, 85, 106 (all are theta1 = 1 types)
% 
% X =[-5.05509 -3.52847  0.07717  1.22380  0.63110 25.93936...
%      0.25561  2.56547  1.61122 -0.25807  8.62327 -4.12968]; % bad X for 118

 
rng(80085,'twister');
seed_crand(80085);

mm = setModelParameters(X);
policy = generatePolicyAndValueFunctions(mm);
simMoms = simulateMomentsMain(policy,mm);
[D,~] = calculateDistanceAndPrint(simMoms,mm,X);

catch
  fprintf('\r\n Failed to evaluate fit metric \n')
  D = 1e12;
end  
